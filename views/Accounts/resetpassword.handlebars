{{#section "css"}}
<style>
.h-custom {
  height: calc(100% - 73px);
}
@media (max-width: 450px) {
  .h-custom {
    height: 100%;
  }
}
</style>
{{/section}}

{{#section "js"}}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
document.querySelector('#formReset').addEventListener('submit', function(e) {
    const password = document.querySelector('#password').value.trim();
    const confirmPassword = document.querySelector('#confirmPassword').value.trim();

    if (!password || !confirmPassword) {
        e.preventDefault();
        Swal.fire({
            icon: 'error',
            title: 'Validation Error',
            text: 'Please fill in all fields.'
        });
        return;
    }

    if (password !== confirmPassword) {
        e.preventDefault();
        Swal.fire({
            icon: 'error',
            title: 'Validation Error',
            text: 'Passwords do not match.'
        });
        return;
    }

    if (password.length < 6) {
        e.preventDefault();
        Swal.fire({
            icon: 'error',
            title: 'Validation Error',
            text: 'Password must be at least 6 characters long.'
        });
        return;
    }
});
</script>

<script>
  {{#if error}}
    Swal.fire({
      icon: 'error',
      title: 'Error',
      text: "{{{error}}}"
    });
  {{/if}}

  {{#if success}}
    Swal.fire({
      icon: 'success',
      title: 'Success',
      text: "{{{success}}}"
    });
  {{/if}}
</script>
{{/section}}

<section class="vh-100">
  <div class="container py-5 h-100">
    <div class="row d-flex align-items-center justify-content-center h-100">

      <div class="col-md-8 col-lg-7 col-xl-6">
        <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.svg"
             class="img-fluid" alt="Illustration">
      </div>

      <div class="col-md-7 col-lg-5 col-xl-5 offset-xl-1">
        <form method="post" id="formReset">

          <h3 class="mb-4">Reset Password</h3>

          <div class="form-outline mb-4">
            <label class="form-label" for="password">New Password</label>
            <input type="password" id="password" {{#if disabled}}disabled{{/if}} name="password" class="form-control form-control-lg" />
          </div>

          <div class="form-outline mb-4">
            <label class="form-label" for="confirmPassword">Confirm Password</label>
            <input type="password" id="confirmPassword" {{#if disabled}}disabled{{/if}} name="confirmPassword" class="form-control form-control-lg" />
          </div>

          <input type="hidden" name="email" value="{{email}}">
          <button type="submit" class="btn btn-primary btn-lg btn-block">
            Reset Password
          </button>

          <p class="text-center mt-3">
            <a href="/accounts/signin">Back to Sign In</a>
          </p>

        </form>
      </div>

    </div>
  </div>
</section>
